<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jyoti's 50th Birthday Celebration</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <a href="#" class="home-button"><i class="fas fa-home"></i> Home</a>
    
    <header>
        <div class="container">
            <h1>Jyoti's 50th Birthday Celebration</h1>
            <h2>April 24-27, 2025 | Kraków, Poland</h2>
            <nav>
                <ul>
                    <li><a href="#events">Events</a></li>
                    <li><a href="#contacts">Contacts</a></li>
                    <li><a href="#reminders">Reminders</a></li>
                    <li><a href="#notes">Notes</a></li>
                    <li><a href="#gallery">Gallery</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero">
        <img src="images/jyoti.jpg" alt="Jyoti" class="hero-image">
        <div class="hero-content">
            <h2>Join Us in Celebrating Jyoti's 50th Birthday</h2>
            <p>A special celebration with family and friends in beautiful Kraków, Poland</p>
        </div>
    </section>

    <section id="events" class="section">
        <div class="container">
            <h2>Event Schedule</h2>
            <div class="event-days">
                <div class="day-tabs">
                    <button class="day-tab active" data-day="Thursday">Thursday</button>
                    <button class="day-tab" data-day="Friday">Friday</button>
                    <button class="day-tab" data-day="Saturday">Saturday</button>
                    <button class="day-tab" data-day="Sunday">Sunday</button>
                </div>
                <div class="events-container">
                    <!-- Events will be loaded here dynamically -->
                    <div class="loading">Loading events...</div>
                </div>
            </div>
        </div>
    </section>

    <section id="contacts" class="section">
        <div class="container">
            <h2>Important Contacts</h2>
            <div class="contacts-container">
                <!-- Contacts will be loaded here dynamically -->
                <div class="loading">Loading contacts...</div>
            </div>
        </div>
    </section>

    <section id="reminders" class="section">
        <div class="container">
            <h2>Reminders</h2>
            <div class="reminders-container">
                <!-- Reminders will be loaded here dynamically -->
                <div class="loading">Loading reminders...</div>
            </div>
        </div>
    </section>

    <section id="notes" class="section">
        <div class="container">
            <h2>Important Information</h2>
            <div class="notes-container">
                <!-- Notes will be loaded here dynamically -->
                <div class="loading">Loading notes...</div>
            </div>
        </div>
    </section>

    <section id="gallery" class="section">
        <div class="container">
            <h2>Photo Gallery</h2>
            <div class="gallery-container">
                <!-- Gallery images will be loaded here dynamically -->
                <!-- <div class="loading">Loading gallery...</div> -->
		<div class="gallery-item">
		    <img class="gallery-image" src="https://www.dropbox.com/scl/fi/j9g96wbbgzqsndxjc5ydv/IMG_4284.jpeg?rlkey=s5uf2vfv32iyk44ipa6kn71yh&dl=0" alt="Gallery Image 1">
		    <div class="gallery-caption">
		      <h3>Welcome Dinner</h3>
		      <p>Thursday evening at Nova Restaurant</p>
		    </div>
		  </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 Jyoti's 50th Birthday Celebration</p>
            <p><a href="admin.html" class="admin-link">Admin Login</a></p>
        </div>
    </footer>

    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="enhanced-admin-query-param.js"></script>
    
    <!-- Direct LocalStorage Integration Script - Final Version -->
    <script>
    // Direct localStorage integration script - Final Version
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Direct localStorage integration script loaded');
      
      try {
        // Get header settings directly
        const headerStr = localStorage.getItem('settings/header');
        console.log('Raw header:', headerStr);
        
        // Get footer settings directly
        const footerStr = localStorage.getItem('settings/footer');
        console.log('Raw footer:', footerStr);
        
        // Try to update header
        if (headerStr) {
          try {
            const headerObj = JSON.parse(headerStr);
            console.log('Parsed header:', headerObj);
            
            // Try different possible structures
            const logoText = headerObj.logoText || 
                          (headerObj.value && typeof headerObj.value === 'string' && JSON.parse(headerObj.value).logoText) || 
                          '';
            
            if (logoText) {
              const headerTitle = document.querySelector('header h1');
              if (headerTitle) {
                headerTitle.textContent = logoText;
                console.log('Updated header text to:', logoText);
              }
            }
          } catch (e) {
            console.error('Error parsing header:', e);
          }
        }
        
        // Try to update footer
        if (footerStr) {
          try {
            const footerObj = JSON.parse(footerStr);
            console.log('Parsed footer:', footerObj);
            
            // Try different possible structures
            const copyright = footerObj.copyright || 
                           (footerObj.value && typeof footerObj.value === 'string' && JSON.parse(footerObj.value).copyright) || 
                           '';
            
            if (copyright) {
              const footerContainer = document.querySelector('footer .container');
              if (footerContainer) {
                const adminLink = footerContainer.querySelector('.admin-link');
                footerContainer.innerHTML = '';
                
                const p = document.createElement('p');
                p.innerHTML = copyright;
                footerContainer.appendChild(p);
                
                if (adminLink) {
                  const adminP = document.createElement('p');
                  adminP.appendChild(adminLink);
                  footerContainer.appendChild(adminP);
                } else {
                  const adminP = document.createElement('p');
                  adminP.innerHTML = '<a href="admin.html" class="admin-link">Admin Login</a>';
                  footerContainer.appendChild(adminP);
                }
                console.log('Updated footer content');
              }
            }
          } catch (e) {
            console.error('Error parsing footer:', e);
          }
        }
        
        // Try to get gallery images
        const galleryItems = [];
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (key.startsWith('gallery/')) {
            try {
              const itemStr = localStorage.getItem(key);
              console.log('Gallery item raw:', key, itemStr);
              
              if (itemStr) {
                const item = JSON.parse(itemStr);
                console.log('Parsed gallery item:', item);
                
                // Try different possible structures
                const imageUrl = item.imageUrl || 
                              (item.value && typeof item.value === 'string' && JSON.parse(item.value).imageUrl) || 
                              '';
                              
                const title = item.title || 
                           (item.value && typeof item.value === 'string' && JSON.parse(item.value).title) || 
                           'Gallery Image';
                           
                const description = item.description || 
                                 (item.value && typeof item.value === 'string' && JSON.parse(item.value).description) || 
                                 '';
                
                if (imageUrl) {
                  galleryItems.push({
                    imageUrl: imageUrl,
                    title: title,
                    description: description
                  });
                }
              }
            } catch (e) {
              console.error('Error parsing gallery item:', key, e);
            }
          }
        }
        
        console.log('Found gallery items:', galleryItems.length);
        if (galleryItems.length > 0) {
          const galleryContainer = document.querySelector('.gallery-container');
          if (galleryContainer) {
            // Only replace if gallery is empty or showing "No images" message
            if (galleryContainer.children.length <= 1 || 
                galleryContainer.innerHTML.includes('No images available') ||
                galleryContainer.innerHTML.includes('Loading gallery')) {
              
              let galleryHTML = '';
              galleryItems.forEach(image => {
                galleryHTML += `
                  <div class="gallery-item">
                    <img class="gallery-image" src="${image.imageUrl}" alt="${image.title || 'Gallery image'}">
                    <div class="gallery-caption">
                      <h3>${image.title || 'Untitled Image'}</h3>
                      <p>${image.description || ''}</p>
                    </div>
                  </div>
                `;
              });
              
              galleryContainer.innerHTML = galleryHTML;
              console.log('Gallery images applied successfully');
            }
          }
        }
      } catch (e) {
        console.error('Main error in localStorage integration:', e);
      }
    });
    </script>
</body>
</html>
