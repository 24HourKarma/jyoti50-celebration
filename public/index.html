<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jyoti's 50th Birthday Celebration</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <a href="#" class="home-button"><i class="fas fa-home"></i> Home</a>
    
    <header>
        <div class="container">
            <h1>Jyoti's 50th Birthday Celebration</h1>
            <h2>April 24-27, 2025 | Kraków, Poland</h2>
            <nav>
                <ul>
                    <li><a href="#events">Events</a></li>
                    <li><a href="#contacts">Contacts</a></li>
                    <li><a href="#reminders">Reminders</a></li>
                    <li><a href="#notes">Notes</a></li>
                    <li><a href="#gallery">Gallery</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero">
        <img src="images/jyoti.jpg" alt="Jyoti" class="hero-image">
        <div class="hero-content">
            <h2>Join Us in Celebrating Jyoti's 50th Birthday</h2>
            <p>A special celebration with family and friends in beautiful Kraków, Poland</p>
        </div>
    </section>

    <section id="events" class="section">
        <div class="container">
            <h2>Event Schedule</h2>
            <div class="event-days">
                <div class="day-tabs">
                    <button class="day-tab active" data-day="Thursday">Thursday</button>
                    <button class="day-tab" data-day="Friday">Friday</button>
                    <button class="day-tab" data-day="Saturday">Saturday</button>
                    <button class="day-tab" data-day="Sunday">Sunday</button>
                </div>
                <div class="events-container">
                    <!-- Events will be loaded here dynamically -->
                    <div class="loading">Loading events...</div>
                </div>
            </div>
        </div>
    </section>

    <section id="contacts" class="section">
        <div class="container">
            <h2>Important Contacts</h2>
            <div class="contacts-container">
                <!-- Contacts will be loaded here dynamically -->
                <div class="loading">Loading contacts...</div>
            </div>
        </div>
    </section>

    <section id="reminders" class="section">
        <div class="container">
            <h2>Reminders</h2>
            <div class="reminders-container">
                <!-- Reminders will be loaded here dynamically -->
                <div class="loading">Loading reminders...</div>
            </div>
        </div>
    </section>

    <section id="notes" class="section">
        <div class="container">
            <h2>Important Information</h2>
            <div class="notes-container">
                <!-- Notes will be loaded here dynamically -->
                <div class="loading">Loading notes...</div>
            </div>
        </div>
    </section>

    <section id="gallery" class="section">
        <div class="container">
            <h2>Photo Gallery</h2>
            <div class="gallery-container">
                <!-- Gallery images will be loaded here dynamically -->
                <div class="loading">Loading gallery...</div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 Jyoti's 50th Birthday Celebration</p>
            <p><a href="admin.html" class="admin-link">Admin Login</a></p>
        </div>
    </footer>

    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="enhanced-admin-query-param.js"></script>
    
    <!-- LocalStorage Integration Script -->
    <script>
    // Simple localStorage integration script for Jyoti50 website
    document.addEventListener('DOMContentLoaded', function() {
      console.log('LocalStorage integration script loaded');
      
      try {
        // Check for settings in localStorage
        const settings = JSON.parse(localStorage.getItem('settings')) || {};
        console.log('LocalStorage settings:', settings);
        
        // Apply header settings if available
        if (settings.header) {
          applyHeaderSettings(settings.header);
        }
        
        // Apply footer settings if available
        if (settings.footer) {
          applyFooterSettings(settings.footer);
        }
        
        // Check for gallery in localStorage
        const gallery = JSON.parse(localStorage.getItem('gallery')) || [];
        if (gallery.length > 0) {
          applyGalleryImages(gallery);
        }
      } catch (error) {
        console.error('Error applying localStorage settings:', error);
      }
    });

    // Apply header settings to the DOM
    function applyHeaderSettings(headerSettings) {
      try {
        console.log('Applying header settings:', headerSettings);
        
        // Update logo text if available
        if (headerSettings.logoText) {
          const headerTitle = document.querySelector('header h1');
          if (headerTitle) {
            headerTitle.textContent = headerSettings.logoText;
            console.log('Updated header logo text to:', headerSettings.logoText);
          }
        }
        
        // Update menu items if available
        if (headerSettings.menuItems && headerSettings.menuItems.length > 0) {
          const navMenu = document.querySelector('header nav ul');
          if (navMenu) {
            // Keep only the first 5 default menu items
            const defaultItems = Array.from(navMenu.children).slice(0, 5);
            
            // Clear the menu
            navMenu.innerHTML = '';
            
            // Add back the default items
            defaultItems.forEach(item => navMenu.appendChild(item));
            
            // Add custom menu items
            headerSettings.menuItems.forEach(item => {
              const li = document.createElement('li');
              const a = document.createElement('a');
              a.href = '#';
              a.textContent = item;
              li.appendChild(a);
              navMenu.appendChild(li);
            });
            console.log('Updated header menu items');
          }
        }
      } catch (error) {
        console.error('Error applying header settings:', error);
      }
    }

    // Apply footer settings to the DOM
    function applyFooterSettings(footerSettings) {
      try {
        console.log('Applying footer settings:', footerSettings);
        
        const footerContainer = document.querySelector('footer .container');
        if (!footerContainer) return;
        
        // Clear existing footer content except admin link
        const adminLink = footerContainer.querySelector('.admin-link');
        footerContainer.innerHTML = '';
        
        // Add copyright if available
        if (footerSettings.copyright) {
          const copyrightP = document.createElement('p');
          copyrightP.innerHTML = footerSettings.copyright;
          footerContainer.appendChild(copyrightP);
          console.log('Added footer copyright');
        }
        
        // Add contact info if available
        if (footerSettings.contactInfo) {
          const contactP = document.createElement('p');
          contactP.innerHTML = footerSettings.contactInfo;
          footerContainer.appendChild(contactP);
          console.log('Added footer contact info');
        }
        
        // Add about text if available
        if (footerSettings.about) {
          const aboutP = document.createElement('p');
          aboutP.innerHTML = footerSettings.about;
          footerContainer.appendChild(aboutP);
          console.log('Added footer about text');
        }
        
        // Add quick links if available
        if (footerSettings.quickLinks && footerSettings.quickLinks.length > 0) {
          const linksDiv = document.createElement('div');
          linksDiv.className = 'quick-links';
          
          const linksList = document.createElement('ul');
          footerSettings.quickLinks.forEach(link => {
            const li = document.createElement('li');
            li.innerHTML = `<a href="#">${link}</a>`;
            linksList.appendChild(li);
          });
          
          linksDiv.appendChild(linksList);
          footerContainer.appendChild(linksDiv);
          console.log('Added footer quick links');
        }
        
        // Add back the admin link
        if (adminLink) {
          const adminP = document.createElement('p');
          adminP.appendChild(adminLink);
          footerContainer.appendChild(adminP);
        } else {
          // Create new admin link if it doesn't exist
          const adminP = document.createElement('p');
          adminP.innerHTML = '<a href="admin.html" class="admin-link">Admin Login</a>';
          footerContainer.appendChild(adminP);
        }
        console.log('Footer settings applied successfully');
      } catch (error) {
        console.error('Error applying footer settings:', error);
      }
    }

    // Apply gallery images from localStorage
    function applyGalleryImages(gallery) {
      try {
        console.log('Applying gallery images from localStorage:', gallery.length);
        
        const galleryContainer = document.querySelector('.gallery-container');
        if (!galleryContainer) return;
        
        // Only replace if gallery is empty or showing "No images" message
        if (galleryContainer.children.length <= 1 || 
            galleryContainer.innerHTML.includes('No images available') ||
            galleryContainer.innerHTML.includes('Loading gallery')) {
          
          let galleryHTML = '';
          gallery.forEach(image => {
            galleryHTML += `
              <div class="gallery-item">
                <img class="gallery-image" src="${image.imageUrl}" alt="${image.title || 'Gallery image'}">
                <div class="gallery-caption">
                  <h3>${image.title || 'Untitled Image'}</h3>
                  <p>${image.description || ''}</p>
                </div>
              </div>
            `;
          });
          
          galleryContainer.innerHTML = galleryHTML;
          console.log('Gallery images applied successfully');
        } else {
          console.log('Gallery already has content, not replacing');
        }
      } catch (error) {
        console.error('Error applying gallery images:', error);
      }
    }
    </script>
</body>
</html>
